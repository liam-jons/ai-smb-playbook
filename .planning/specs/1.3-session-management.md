# Spec 1.3 -- Session Management

> **Phase 2 build agent:** Agent 2 -- Context & Session Management
> **Track:** Both (General + Developer)
> **Section route:** `/general/session-management` and `/developer/session-management`

---

## Purpose

This section teaches Phew! staff **when and how to end a Claude session cleanly**, so they start the next one in the strongest possible position. It covers the practical rules of thumb for session boundaries, the technique of getting Claude to write its own handoff prompt, copyable templates for every handoff scenario, and the atomic task principle for breaking large jobs into subtasks.

Session management is the single most impactful habit a new Claude user can build. The context simulator in section 1.2 shows *why* sessions degrade; this section shows *what to do about it*. Cross-reference section 1.2 throughout -- the "why" lives there, the "how" lives here.

---

## Source References

The Phase 2 build agent **must** read the following files before starting work. They are listed in priority order.

| # | File | What it provides |
|---|------|------------------|
| 1 | `.planning/research/session-handoff-requirements.md` | **Primary source.** 5 handoff scenario types, information architecture, token-awareness bands, user group adaptations, proposed skill structure, real-world patterns from 21 analysed continuation prompts. |
| 2 | `.planning/source-context/phew-initial-thoughts-for-meeting-follow-up.md` | Original topic list: "When to stop a session", "Handoff prompts", "How to break tasks into subtasks". |
| 3 | `.planning/source-context/phew-training-ai-and-the-art-of-the-possible-summary.md` | Training content on session management, context management, and token usage. |
| 4 | `.planning/research/command-availability.md` | Slash commands are Claude Code/CoWork only. claude.ai/Desktop users invoke skills via natural language. Handoff tooling must work without slash commands for non-dev users. |
| 5 | `.planning/research/context-window-mechanics.md` | Context window behaviour, degradation mechanics, compaction process. Used to validate token-awareness content. |
| 6 | `.planning/research/app-tech-stack.md` | UI component decisions: shadcn/ui, Motion, copy-to-clipboard hook, routing, Shiki. |
| 7 | `.planning/research/frontend-skills-review.md` | Design guidelines and the Build Agent Checklist (copied in full at the end of this spec). |
| 8 | `.planning/specs/1.2-context-simulator.md` | Sibling spec. Cross-reference the context simulator component and its visual language for degradation. Do not duplicate its content -- link to it. |

---

## Content Outline

### Part 1: When to Stop a Session and Start Fresh

**Key message:** Stopping a session is not failure -- it is the single most effective way to maintain Claude's quality. A fresh session with a good briefing outperforms a long session every time.

#### General Track: Rules of Thumb (Plain Language)

Present these as a numbered checklist. Each rule gets a one-sentence explanation and a short "what to look for" description.

1. **The "one task, one session" rule.** Each session should focus on a single task or a closely related set of tasks. If you are about to change topic entirely, start a new session.

2. **The 30-message guideline.** After roughly 25-30 back-and-forth messages, consider wrapping up. Longer sessions are not automatically worse, but this is the zone where quality starts to decline for most tasks.

3. **The repetition signal.** If Claude starts repeating information you already discussed, forgetting decisions you agreed on, or asking questions you have already answered, the session is degrading. Time to hand off.

4. **The drift signal.** If Claude's responses start feeling less specific or more generic -- giving you boilerplate where it previously gave tailored advice -- the earlier context is losing influence. Wrap up.

5. **The scope creep signal.** If your original task has grown significantly ("while you're at it, can you also..."), the accumulated context is diluting focus. Better to start a new session for the additional work.

6. **The "good stopping point" principle.** Just finished a draft? Agreed on a plan? Completed a review? This is the natural moment to create a handoff and start fresh for the next phase.

#### Developer Track: Token-Aware Session Management

All general rules above, **plus** technical depth:

**Token-awareness bands** (from session-handoff-requirements.md section 5.1):

| Context usage | What you will notice | What to do |
|---|---|---|
| **0--50%** | Everything works well, full recall | Keep going. If the task is complete, create a handoff for good practice. |
| **50--70%** | Subtle degradation; Claude may miss nuances from early conversation | Consider a checkpoint handoff. In Claude Code, try `/compact` with focus instructions first. |
| **70--85%** | Noticeable degradation; earlier context losing influence | Create a handoff now, before more context is lost. Be thorough -- capture all decisions and state. |
| **85--95%** | Critical; auto-compaction imminent | Emergency save. Focus on essential information only. |
| **Post-compaction** | Session has been auto-compacted; gaps in recall | Recovery mode. Check saved outputs, recent git history, checkpoint files. Create a recovery handoff acknowledging what was lost. |

**How to check context usage:**
- **Claude Code:** Use the `/cost` command to see current context consumption.
- **claude.ai / Desktop:** No direct indicator. Watch for the behavioural signals above (repetition, drift, forgetting).

**The 200k token subtask benefit:**
When you break a large task into subtasks (see Part 3 below), each subtask gets its own fresh 200,000-token context window. A five-subtask project effectively has access to 1,000,000 tokens of context capacity -- each window sharp and focused -- instead of cramming everything into a single degrading session.

---

### Part 2: Getting Claude to Write Its Own Handoff

**Terminology note:** Throughout this playbook, we use **"handoff prompt"** as the primary term for the structured summary you create when ending a session. This is also called a "continuation prompt" (the term used in some Claude documentation) â€” they mean the same thing: a prompt you paste into a new session to restore context from the previous one.

**Key message:** You do not need to write the handoff yourself. Ask Claude to summarise the session and produce a handoff prompt. Claude has access to the full conversation and can extract the key information.

#### The Handoff Workflow (Both Tracks)

Present as a numbered step-by-step process with an accompanying visual flow (see Interaction Design below):

1. **Recognise it is time.** Use the rules of thumb from Part 1.
2. **Ask Claude to create the handoff.** Use one of the copyable prompts from the Copyable Content section below.
3. **Review the output.** Check that the key decisions, progress, and next steps are captured.
4. **Copy the handoff.** Use the copy button.
5. **Start a new session.** Open a fresh conversation (or a new Claude Code session).
6. **Paste the handoff as your first message.** Claude reads it and picks up where you left off.

#### General Track Emphasis

- Frame this as "saving your progress" -- like saving a game.
- Avoid technical jargon: no "tokens", no "context window", no "compaction". Use "conversation memory" or "Claude's memory of this chat".
- Emphasise that the handoff is a single block of text they copy and paste -- nothing more.
- Note that if they work on the same type of task regularly, setting up a **Project** in claude.ai (with custom instructions describing their usual workflow) is even better than per-session handoffs. Reference section 1.4 for Projects.

#### Developer Track Emphasis

Five handoff scenario types (from session-handoff-requirements.md section 2). Present each with a brief description, when it applies, and which template to use:

1. **Planned session boundary** (most common, ~67% of handoffs). Work reached a natural milestone. Use the standard handoff template. Straightforward.

2. **Mid-task context overflow** (emergency save, ~14%). Context window is running out or has already compacted. Urgency: capture state before more is lost. Use the emergency handoff template. Focus on what is done vs in-progress vs not started.

3. **Task delegation / person handoff** (~10%). Work is being handed to a different person or session with different capabilities. Must be fully self-contained: project overview, file locations, conventions, constraints, environment setup. Use the delegation handoff template.

4. **Spec/artifact iteration handoff** (~24%). The session produced or iterated on a document. Structure the handoff around the artifact's version, changes made, and review findings. Use the artifact iteration template.

5. **Multi-workstream handoff** (~14%). Multiple parallel work items, each at a different stage. Must preserve per-workstream status, dependencies, and priority order. Use the multi-workstream template.

Present the **information architecture** from the research (section 3 of session-handoff-requirements.md):

**Universal elements** (every handoff needs these):
- Project identity block (name, session number, date)
- Context files to read first (ordered, annotated)
- Cumulative progress summary (recency-weighted -- recent work expanded, older work compressed)
- Session objectives (primary, secondary, tertiary)
- Data locations (where key files live)

**Common elements** (most handoffs):
- Important context / persistent principles (or reference to where they live)
- Recommended approach / execution order
- Open questions

**Scenario-specific elements:**
- Technology stack (for technical projects)
- Decision framework (for review/iteration handoffs)
- Remaining work tracker (for multi-workstream)
- Verification checklists (for QA scenarios)
- Environment setup (for delegation)
- Compaction warnings (for emergency saves)

---

### Part 3: Breaking Tasks into Subtasks (The Atomic Task Principle)

**Key message:** Large tasks produce better results when broken into focused subtasks, each in its own session. This is not just good practice -- it is how you get the most from Claude's architecture.

#### The Atomic Task Principle (Both Tracks)

From the training session: the idea that each task should be broken down to the smallest unit that can be completed independently. Each atomic task gets a fresh context window, meaning Claude brings its full attention to each piece.

**General Track Presentation:**

Use an example relevant to Phew! (safeguarding/public sector context):

> **Example: Writing a safeguarding policy review**
>
> Instead of one session: "Review our safeguarding policy, identify gaps, draft updates, and create a summary for the board."
>
> Break it down:
> 1. **Session 1:** "Review our safeguarding policy against current guidance. List all gaps and areas needing updates." --> Create handoff.
> 2. **Session 2:** (Paste handoff) "For each gap identified, draft the specific policy update needed." --> Create handoff.
> 3. **Session 3:** (Paste handoff) "Review all drafted updates for consistency and create a board summary of changes made."
>
> Each session is focused. Claude does not need to hold the entire project in memory at once.

**Developer Track Presentation:**

More technical example, plus the 200k multiplier concept:

> **Example: Adding a new API endpoint**
>
> Instead of one session: "Add a new API endpoint for user preferences, including database migration, validation, tests, and documentation."
>
> Break it down:
> 1. **Session 1: Design** -- "Review the existing API patterns in this codebase and propose the schema and endpoint design for user preferences." --> Handoff captures the design decisions.
> 2. **Session 2: Implementation** -- (Paste handoff) "Implement the database migration and model based on the agreed design." --> Handoff captures file changes and any deviations from plan.
> 3. **Session 3: API + Validation** -- (Paste handoff) "Implement the endpoint and input validation." --> Handoff.
> 4. **Session 4: Tests + Docs** -- (Paste handoff) "Write tests and update API documentation."
>
> Four sessions x 200k tokens = 800k tokens of focused context capacity, versus a single session that degrades past the halfway mark.

**The Task Decomposition Prompt** (Copyable -- see Copyable Content section):

A prompt the user can paste to get Claude to help them break down a large task. This is one of the key deliverables.

---

### Part 4: Platform-Specific Guidance

Brief section addressing how session management differs by platform. Present as a comparison table or tabbed content.

| Aspect | claude.ai / Desktop | Claude Code |
|---|---|---|
| Starting a new session | Click "New chat" | Start a new terminal session or use `/clear` |
| Creating a handoff | Use the handoff prompt (copy-paste) | Use the handoff prompt, or use the session-handoff skill if installed |
| Handoff format | Single text block to copy-paste into the new chat | Structured markdown file saved to the project (e.g., `.planning/continuation-prompts/`) |
| Checking context usage | Watch for behavioural signals (repetition, drift) | Use `/cost` to check token usage |
| Alternative to per-session handoffs | Set up a **Project** with custom instructions for recurring work | Use `CLAUDE.md` and `/docs` for persistent project context |
| Skill invocation | Automatic via natural language ("I need to hand off this session") | Explicit via `/session-handoff` or automatic |
| Commands | Not available (skills only) | Full slash command support |

---

## Interaction Design

### Components Used

All from the approved tech stack (see `.planning/research/app-tech-stack.md`):

| Component | Source | Usage in this section |
|---|---|---|
| `Accordion` | shadcn/ui | Expandable rules of thumb, handoff scenario types, information architecture elements |
| `Tabs` | shadcn/ui | General / Developer track switching (inherited from app shell) |
| `Card` | shadcn/ui | Handoff prompt templates, example scenarios, platform comparison |
| `Button` | shadcn/ui | Copy-to-clipboard triggers, "Show me an example" toggles |
| `Badge` | shadcn/ui | Track indicators, scenario type labels, context usage level labels |
| `Alert` | shadcn/ui | Key takeaway callouts, "when to stop" warning signals |
| `Collapsible` | shadcn/ui | Developer-only deep-dive content within shared sections |
| `Tooltip` | shadcn/ui | Contextual help on token-awareness bands |
| `CopyButton` | Custom (shared component) | On every prompt template and code block |
| `CodeBlock` | Custom (Shiki via react-shiki) | Syntax-highlighted handoff templates (developer track) |
| `motion.div` | Motion (`motion/react`) | Accordion expand/collapse, alert entrance animations |

### Page Layout

Structure the section as a single scrollable page with clear heading hierarchy and anchor links:

```
[Section Header: Session Management]
  [Key Takeaway Alert: "A fresh session with a good handoff beats a long degrading session every time."]

  [Part 1: When to Stop]
    [General: Rules of Thumb checklist -- Accordion items]
    [Developer: Token-Awareness Bands table + Collapsible deep-dive]
    [Cross-reference link to Section 1.2 Context Simulator]

  [Part 2: The Handoff Workflow]
    [Step-by-step visual flow -- numbered cards or styled ordered list]
    [General: "Saving your progress" framing]
    [Developer: 5 Scenario Types -- Accordion with scenario cards inside]
    [Developer: Information Architecture -- Collapsible with element list]

  [Part 3: Breaking Tasks into Subtasks]
    [The Atomic Task Principle -- explanation with example]
    [General: Safeguarding policy example]
    [Developer: API endpoint example + 200k multiplier callout]
    [Copyable: Task Decomposition Prompt]

  [Part 4: Platform Differences]
    [Comparison table -- responsive, stacks on mobile]

  [Copyable Templates Section]
    [All handoff prompts -- each in a Card with CopyButton]
    [Organised by: General | Developer, then by scenario type]
```

### Responsive Behaviour

- **Mobile (< 640px):** Accordion items stack vertically. Comparison table scrolls horizontally or stacks into a list. Copyable prompt cards take full width.
- **Tablet (640-1024px):** Two-column layout for comparison table. Prompt cards in a single column with comfortable padding.
- **Desktop (> 1024px):** Full layout with sidebar anchor links (if app shell provides). Prompt cards can display side-by-side for general vs developer comparison.

### Interactions

- **Track switching:** When the user switches between General and Developer, content filters appropriately. General hides token-awareness bands, scenario types deep-dive, and technical handoff templates. Developer shows everything.
- **Copy feedback:** CopyButton transitions from copy icon to tick icon for 2 seconds (using the `useCopyToClipboard` hook from app-tech-stack.md).
- **Accordion behaviour:** Use `type="single" collapsible` -- only one item open at a time to prevent overwhelming the page.
- **Cross-reference links:** "See how this looks in the Context Simulator" links to section 1.2. Implemented as React Router links, not anchor tags.
- **Example toggles:** "Show me an example" buttons that expand a Collapsible with a worked example. Keeps the page scannable while providing depth on demand.

---

## Copyable Content

Every prompt below is **real, usable content** -- not a placeholder. These are key deliverables of this section. Each must be wrapped in a `Card` component with a `CopyButton`.

### Prompt 1: General Handoff Prompt (For claude.ai / Desktop Users)

**Label:** "Session Handoff -- General"
**Track:** General (also shown on Developer track as a simpler alternative)

```
Before we finish, I need you to create a handoff summary so I can continue this work in a new conversation.

Please write a continuation prompt that includes:

1. **What we were working on** -- a brief description of the project or task
2. **What we accomplished** -- the key decisions made, content produced, or problems solved in this session
3. **What needs to happen next** -- the specific next steps, in priority order
4. **Important things to remember** -- any preferences, constraints, or decisions that the next session must follow
5. **Any open questions** -- things we did not resolve that need addressing

Format this as a single block of text I can paste into a new conversation. Start the output with the instruction: "This is a continuation from a previous conversation. Please read the following context and then we will pick up where we left off."
```

### Prompt 2: Developer Handoff Prompt (For Claude Code Users)

**Label:** "Session Handoff -- Developer"
**Track:** Developer

```
Create a structured continuation prompt for the next session. Save it as a markdown file.

Include these sections:

## Project Context
- Project name, one-line description, and repo location
- Current branch and any uncommitted changes

## Context Files to Read First
- List the 3-5 most important files for the next session, in reading order
- Annotate the most critical file

## Progress Summary
- Use recency-weighted format: compress older sessions into one-line summaries, expand the current session with full detail
- Distinguish clearly between: completed, in progress, and not started

## Next Session Objectives
- Primary objective (must do)
- Secondary objective (if time permits)

## Key Decisions and Constraints
- Decisions made in this session that must be respected going forward
- Any persistent principles or conventions (or reference to where they live, e.g., CLAUDE.md)

## Recommended Approach
- Suggested execution order for the next session
- Note any tasks that could be parallelised via subagents

## Open Questions
- Unresolved items that may affect the next session's work

## Data Locations
- File tree or table showing where key project files are

Keep the total length under 4,000 words. Reference existing project files rather than repeating their content.
```

### Prompt 3: Emergency Handoff Prompt (Context Running Low)

**Label:** "Emergency Session Save"
**Track:** Both (simplified version for General, full version for Developer)

**General version:**
```
Our conversation is getting long and I want to save our progress before the quality drops. Please create an emergency handoff summary with:

1. **Where we are right now** -- what is the current state of the work?
2. **What is finished** -- what can I consider done?
3. **What is in progress** -- what were we in the middle of?
4. **What was the plan** -- what were we going to do next?
5. **Critical details** -- anything the next conversation absolutely must know

Keep it concise. I will paste this into a new conversation to continue.
```

**Developer version:**
```
Context is running low. Create an emergency continuation prompt immediately.

Focus on:
1. **Current state snapshot** -- what exists now (files changed, decisions made, code written)
2. **In-progress work** -- what we were actively working on and its exact state
3. **Remaining plan** -- what was next in the execution order
4. **Known issues** -- anything broken, incomplete, or requiring attention
5. **Critical file references** -- absolute paths to the most important files

Skip the preamble. Be maximally concise. Every token counts.
```

### Prompt 4: Task Decomposition Prompt

**Label:** "Break Down a Large Task"
**Track:** Both

```
I have a task I would like to break into smaller, focused subtasks. Here is the task:

[Describe your task here]

Please help me decompose this into atomic subtasks by:

1. **Identifying the natural phases** -- what distinct stages does this work go through? (e.g., research, planning, drafting, review, refinement)
2. **Defining clear boundaries** -- each subtask should have a specific, measurable outcome. What does "done" look like for each one?
3. **Ordering by dependency** -- which subtasks must finish before others can start? Which can be done in parallel?
4. **Estimating scope** -- for each subtask, is it a single focused session or might it need multiple sessions?

For each subtask, give me:
- A one-line description
- The specific deliverable or outcome
- Any inputs it needs from previous subtasks
- Suggested session handoff points (where to stop and create a continuation prompt)
```

### Prompt 5: Session Review Prompt

**Label:** "Review This Session Before Wrapping Up"
**Track:** Both

```
Before we wrap up this session, I would like a brief review of what we have covered. Please summarise:

1. **Decisions made** -- list every decision or agreement from this session
2. **Work produced** -- what outputs, drafts, or changes were created
3. **Things we changed our minds about** -- any earlier plans we modified and why
4. **Outstanding items** -- anything we discussed but did not complete
5. **Quality check** -- is there anything from this session you would recommend I double-check or revisit?

This is not a handoff -- I just want to make sure we have not missed anything before I decide whether to continue or wrap up.
```

### Prompt 6: Delegation Handoff Prompt (Handing to Another Person)

**Label:** "Hand Off to a Colleague"
**Track:** Developer (but useful for General users too -- show on both with note)

```
I need to hand this work off to a colleague who will continue in a separate session. They have no context about this project.

Create a fully self-contained briefing that includes:

## Project Overview
- What is this project? (one paragraph)
- What is the goal?

## Current State
- What has been completed so far?
- What is the current status?

## What Needs to Happen Next
- Specific tasks, in priority order
- Expected outcomes for each

## Key Decisions Already Made
- Decisions that must be respected (do not revisit these)
- The reasoning behind the most important ones

## Important Constraints
- Technical constraints, style preferences, or rules
- Anything the next person might accidentally violate without knowing

## Files and Resources
- Where to find key files or documents
- Any credentials, access requirements, or setup steps needed

## How to Get Started
- A recommended first step for the new person
- What to read first before doing anything

Write this assuming the reader knows nothing about the project. Be explicit about things that might seem obvious.
```

---

## Two-Track Considerations

### General Track

**Tone and framing:**
- Frame session management as "getting the best from Claude" not "working around limitations".
- Use analogies: "Like saving your progress in a document" or "Like starting a fresh page in a notebook with a summary of the previous page at the top."
- Avoid: tokens, context window, compaction, system prompt, context usage percentages.
- Replace with: "Claude's memory of this conversation", "conversation getting long", "starting fresh with a summary".

**Content scope:**
- Part 1: Rules of thumb only (the 6 plain-language rules). No token-awareness bands.
- Part 2: The handoff workflow steps + Prompt 1 (general handoff) + Prompt 3 (emergency, general version) + Prompt 5 (session review). No scenario types breakdown.
- Part 3: The atomic task principle with the safeguarding policy example. The task decomposition prompt (Prompt 4). No 200k multiplier callout.
- Part 4: Simplified -- just "how to start a new chat" and "consider using Projects for recurring work".

**Key interaction:**
- A single prominent "Create a Handoff" card with the general handoff prompt and a large copy button. This should be the most visible element on the page for general users. One-click copy.

### Developer Track

**Tone and framing:**
- Direct, technical, practical. Assume familiarity with CLIs and code projects.
- Use precise terminology: tokens, context window, compaction, continuation prompts.
- Include Claude Code-specific guidance (commands, file paths, git context).

**Content scope:**
- All content from all four parts, including token-awareness bands, all five scenario types, the information architecture breakdown, and the 200k multiplier.
- All six copyable prompts.
- Platform comparison table.
- Reference to the session-handoff skill in the starter kit.

**Additional developer-only content:**

1. **Structured handoffs as files:** Developers should save handoffs as markdown files in their project (e.g., `.planning/continuation-prompts/session-N.md`), not just copy-paste them. This creates a project history.

2. **The recency-weighted summary pattern:** Explain how to compress old sessions and expand recent ones. From the research: "Sessions 01-04: [one-line]. Session 05: [detailed breakdown]."

3. **CLAUDE.md as persistent context:** For principles and constraints that repeat across every session, put them in CLAUDE.md instead of repeating them in handoffs. The handoff then references CLAUDE.md rather than duplicating it.

4. **Subagent parallelisation hints:** When decomposing tasks, note which subtasks could be run as parallel subagents in Claude Code. This connects to the 200k multiplier concept.

5. **Automated checkpoints:** Mention that Claude Code hooks (PreCompact, SessionEnd) can be configured to generate automatic checkpoint handoffs. This is an advanced technique -- brief mention with a note that the starter kit includes relevant files.

6. **Starter kit reference:** Point to the session-handoff skill files in `starter-kit/skills/` and the example prompts in `starter-kit/prompts/` for ready-to-use tooling.

---

## Acceptance Criteria

### Content Completeness

- [ ] Part 1 (When to Stop) includes all 6 rules of thumb with explanations
- [ ] Part 1 (Developer) includes the full token-awareness bands table (all 5 levels from research)
- [ ] Part 1 (Developer) includes the 200k token subtask benefit explanation
- [ ] Part 2 includes the 6-step handoff workflow with visual flow
- [ ] Part 2 (Developer) includes all 5 handoff scenario types with descriptions and use-case guidance
- [ ] Part 2 (Developer) includes the information architecture breakdown (universal, common, scenario-specific elements)
- [ ] Part 3 includes the atomic task principle with both examples (safeguarding + API)
- [ ] Part 4 includes the platform comparison table
- [ ] All 6 copyable prompts are present, real (not placeholder), and have copy buttons
- [ ] Cross-reference to section 1.2 (context simulator) is present and functional
- [ ] Cross-reference to section 1.4 (skills/extensions) for Projects guidance is present

### Track Filtering

- [ ] General track hides: token-awareness bands, scenario types deep-dive, information architecture breakdown, developer handoff prompt, emergency developer version, delegation prompt, 200k multiplier callout, structured handoffs as files, recency-weighted pattern, CLAUDE.md guidance, subagent hints, automated checkpoints
- [ ] General track shows: rules of thumb, handoff workflow, general handoff prompt, emergency general version, session review prompt, task decomposition prompt, atomic task principle with safeguarding example
- [ ] Developer track shows all content
- [ ] Track switching is smooth and does not cause layout jumps (use AnimatePresence or CSS transitions)

### Interaction Quality

- [ ] Every copyable prompt has a functioning CopyButton with tick feedback
- [ ] Accordion items expand/collapse with animation (300-500ms, ease-out)
- [ ] Cross-reference links navigate to the correct section (React Router)
- [ ] Collapsible "Show me an example" toggles work and animate
- [ ] Page is scrollable with clear heading hierarchy

### Responsiveness

- [ ] Layout works at 320px, 640px, 768px, 1024px widths
- [ ] Comparison table readable on mobile (horizontal scroll or stacked layout)
- [ ] Copyable prompt cards take full width on mobile with adequate padding
- [ ] Touch targets >= 44px on all interactive elements

### Accessibility

- [ ] Semantic headings (h2 for parts, h3 for subsections)
- [ ] Accordion uses proper `aria-expanded` and `aria-controls` (shadcn handles this)
- [ ] All CopyButton elements have `aria-label` ("Copy handoff prompt to clipboard")
- [ ] Focus indicators visible on all interactive elements
- [ ] `prefers-reduced-motion` respected on all animations

### Content Quality

- [ ] UK English throughout (summarise not summarize, organised not organized, colour not color, programme not program)
- [ ] Tone is practical and non-condescending for both tracks
- [ ] Examples are contextually appropriate for a UK SMB in safeguarding/public sector
- [ ] No enterprise jargon
- [ ] Meta-narrative reference included where natural (e.g., "This playbook itself was built using the atomic task principle -- each section was a separate session.")

---

## Build Agent Checklist

Copy of the full checklist from `.planning/research/frontend-skills-review.md`. Every item must be verified before marking this section complete.

### Frontend Quality Checklist

**Typography**
- [ ] Body text >= 16px (1rem), using rem units
- [ ] Max line length: 65ch for body text
- [ ] Fluid type (clamp) on headings; fixed sizes on UI controls
- [ ] Font stacks include size-adjusted fallback
- [ ] No generic fonts (Inter, Roboto, etc.) unless explicitly specified

**Colour & Theming**
- [ ] All custom colours defined in OKLCH via CSS variables
- [ ] Neutrals tinted towards brand hue (not pure grey)
- [ ] No pure black (#000) or pure white (#fff)
- [ ] Dark mode tested and functional (if applicable to section)
- [ ] All text meets WCAG AA contrast (4.5:1 body, 3:1 large/UI)

**Layout & Spacing**
- [ ] Spacing values from the 4pt grid (4, 8, 12, 16, 24, 32, 48, 64, 96)
- [ ] Visual hierarchy uses 2+ dimensions (size, weight, colour, space)
- [ ] No nested cards
- [ ] No identical repeating card grids

**Motion & Animation**
- [ ] Only `transform` and `opacity` animated (no width/height/top/left)
- [ ] Timing follows 100/300/500 rule
- [ ] Easing uses exponential curves (not default `ease` or bounce)
- [ ] `prefers-reduced-motion` handled (crossfade fallback or disable)
- [ ] Exit animations faster than entrances
- [ ] Motion used via Tailwind transitions where CSS suffices; Motion library only for layout/enter/exit

**Interaction**
- [ ] All 8 interactive states designed (default, hover, focus, active, disabled, loading, error, success)
- [ ] `:focus-visible` ring on all interactive elements (2-3px, offset, 3:1 contrast)
- [ ] Touch targets >= 44px
- [ ] Copy-to-clipboard on every prompt/template/code block
- [ ] Skeleton screens for loading states (not generic spinners)

**Accessibility**
- [ ] Semantic HTML (headings, landmarks, labels)
- [ ] Skip link present
- [ ] Keyboard navigation tested (Tab, Enter, Escape, Arrows)
- [ ] `aria-expanded`, `aria-controls` on accordions/collapsibles
- [ ] `aria-label` on icon-only buttons
- [ ] Images have `alt` text (or `alt=""` for decorative)
- [ ] Never `outline: none` without `:focus-visible` replacement

**Performance**
- [ ] No barrel file imports (direct imports from source)
- [ ] Shiki lazy-loaded (not in initial bundle)
- [ ] Derived state computed during render (no useEffect for derived values)
- [ ] `content-visibility: auto` on long scrollable content
- [ ] Passive event listeners on scroll/touch handlers
- [ ] Static JSX hoisted outside components where possible

**Responsive**
- [ ] Mobile-first (base styles for mobile, min-width queries for larger)
- [ ] Tested at 320px, 640px, 768px, 1024px widths
- [ ] No critical functionality hidden on mobile
- [ ] Hover-dependent features have touch alternatives
- [ ] Safe area insets handled for mobile

**UX Writing & Content**
- [ ] UK English throughout (spelling, grammar, currency, date format)
- [ ] Button labels use verb + object pattern
- [ ] Error messages answer: what, why, how to fix
- [ ] Consistent terminology (no synonyms for the same action)
- [ ] Empty states are actionable, not just "Nothing here"

**Code Quality**
- [ ] Tailwind utility classes only (no CSS modules or styled-components)
- [ ] `cn()` utility for conditional class merging
- [ ] `@/` path alias for all imports
- [ ] Components composed from shadcn primitives (not mega-components)
- [ ] Content defined as typed TS objects, not hard-coded JSX

---

## Content Data Structure

The build agent should define the section's content as typed TypeScript objects in `src/content/shared/session-management.ts` (shared content) with track-specific filtering. Suggested structure:

```typescript
interface RuleOfThumb {
  id: string;
  title: string;
  description: string;
  signal: string; // "What to look for"
  tracks: ('general' | 'developer')[];
}

interface TokenAwarenessBand {
  range: string;          // e.g., "0-50%"
  userExperience: string;
  recommendation: string;
  tracks: ('developer')[];
}

interface HandoffScenario {
  id: string;
  name: string;
  frequency: string;
  description: string;
  characteristics: string[];
  templatePromptId: string; // references a CopyablePrompt
  tracks: ('developer')[];
}

interface CopyablePrompt {
  id: string;
  label: string;
  description: string;
  content: string;         // the actual prompt text
  tracks: ('general' | 'developer')[];
  scenarioType?: string;   // links to HandoffScenario if applicable
}

interface WorkedExample {
  id: string;
  title: string;
  context: string;
  steps: { session: number; description: string; outcome: string }[];
  tracks: ('general' | 'developer')[];
}
```

This structure allows the track-filtering logic to show/hide content based on the active track without duplicating data.

---

## Implementation Notes for Build Agent

1. **This section shares Agent 2 with section 1.2 (Context Simulator).** Coordinate visual language -- if the simulator uses specific colours for "healthy" vs "degrading" vs "critical" context states, reuse those same colours in the token-awareness bands table.

2. **The copyable prompts are the highest-value deliverable.** Invest time in making them visually prominent, easy to scan, and effortless to copy. The general handoff prompt (Prompt 1) should be the single most prominent element on the general track page.

3. **Do not duplicate content from section 1.2.** The context simulator explains *why* sessions degrade. This section explains *what to do about it*. Use cross-reference links, not repeated explanations.

4. **The handoff workflow (Part 2) benefits from a visual step flow** -- a horizontal sequence of numbered steps (on desktop) that stacks vertically on mobile. This is not a complex component; a styled ordered list with numbered badges and connecting lines achieves the effect.

5. **Content from the session-handoff-requirements.md research** is comprehensive. The build agent should use it as the authority for scenario types, information architecture, and token-awareness bands. Do not simplify or omit elements from the research without good reason.

6. **The safeguarding policy example** (Part 3, general track) is deliberately chosen to be relevant to Phew!'s industry. If the build agent has better contextual knowledge of Phew!'s work from the site scrape (`.planning/research/phew-site-content.md`), adapt the example accordingly -- but keep it in the safeguarding/public sector domain.
